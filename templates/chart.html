<!DOCTYPE html>
<html>
<head>
    <title>Number of Debian packages over time</title>

    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.highcharts.com/highcharts.src.js"></script>
    <script language="javascript" type="text/javascript">
        $(function () {
            $.getJSON('/json', function(data) {
                console.log(data);
                $('#container').highcharts({
                    chart: {
                        type: "line",
                        zoomType: "x"
                    },
                    plotOptions: {
                        series: {
                            marker: {
                                enabled: false
                            }
                        }
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    xAxis: {
                        type: "datetime",
                        plotLines: [{
                            color: 'grey',
                            label: { text: 'sarge' },
                            value: Date.UTC(2005, 6, 6),
                            width: 1,
                        },{
                            color: 'grey',
                            label: { text: 'etch' },
                            value: Date.UTC(2007, 4, 8),
                            width: 1,
                        },{
                            color: 'grey',
                            label: { text: 'lenny' },
                            value: Date.UTC(2009, 2, 15),
                            width: 1,
                        },{
                            color: 'grey',
                            label: { text: 'squeeze' },
                            value: Date.UTC(2011, 2, 6),
                            width: 1,
                        },{
                            color: 'grey',
                            label: { text: 'wheezy' },
                            value: Date.UTC(2013, 5, 4),
                            width: 1,
                        },],
                    },
                    series: data.chart_data
                });
            });
        });



    </script>
</head>
<body>
    <h3>Number of Debian packages over time</h3>
        <div id="container" style="width:100%; height:400px;"></div>
        Click on the entries in the legend to show/hide lines. Drag the mouse horizontally over the chart to zoom.
    <br>
    <table border=1>
        <thead>
            <tr>
                <th>Snapshot</th>
                <th>Distribution</th>
                <th>Repository</th>
                <th>Architecture</th>
                <th>Number of packages</th>
                <th>Number of maintainers</th>
                <th>Filesize</th>
                <th>Filepath</th>
            </tr>
        </thead>
        <tbody>
            {%for row in table %}
            <tr>
                <td>{{ row.snapshot_time }}</td>
                <td>{{ row.distribution }}</td>
                <td>{{ row.repository }}</td>
                <td>{{ row.architecture }}</td>
                <td>{{ row.number_of_packages or '' }}</td>
                <td>{{ row.number_of_maintainers or ''}}</td>
                <td>{{ row.filesize or ''}}</td>
                <td>{{ row.filepath or ''}}</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{ total_filesize }} bytes</td>
                <td>{{ number_of_files }} files</td>
            </tr>
        </tfoot>
    </table>
</body>
</html>
